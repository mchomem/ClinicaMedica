## SCRIPT MYSQL

CREATE DATABASE CLINICA_MEDICA;

USE CLINICA_MEDICA;

CREATE TABLE USUARIO
(
	ID_USUARIO BIGINT NOT NULL
	, LOGIN VARCHAR(50) NOT NULL
	, PASSWORD VARCHAR(100) NOT NULL
	, ATIVO BOOL NOT NULL DEFAULT TRUE
);

ALTER TABLE USUARIO ADD CONSTRAINT PK_USUARIO PRIMARY KEY(ID_USUARIO);
ALTER TABLE USUARIO MODIFY ID_USUARIO BIGINT NOT NULL AUTO_INCREMENT;

CREATE TABLE PACIENTE
(
	ID_PACIENTE BIGINT NOT NULL
	, NOME VARCHAR(100) NOT NULL
	, DATA_NASCIMENTO DATETIME NULL
	, SEXO VARCHAR(1) NOT NULL
	, ENDERECO VARCHAR(100) NOT NULL
	, TELEFONE VARCHAR(14) NULL
	, ATIVO BOOL NOT NULL DEFAULT TRUE
	, FOTO BLOB NULL
);

ALTER TABLE PACIENTE ADD CONSTRAINT PK_PACIENTE PRIMARY KEY(ID_PACIENTE);
ALTER TABLE PACIENTE MODIFY ID_PACIENTE BIGINT NOT NULL AUTO_INCREMENT;

CREATE TABLE MEDICAMENTO
(
	ID_MEDICAMENTO BIGINT NOT NULL
	, NOME VARCHAR(200) NOT NULL
);

ALTER TABLE MEDICAMENTO ADD CONSTRAINT PK_MEDICAMENTO PRIMARY KEY(ID_MEDICAMENTO);
ALTER TABLE MEDICAMENTO MODIFY ID_MEDICAMENTO BIGINT NOT NULL AUTO_INCREMENT;

CREATE TABLE AGENDAMENTO
(
	ID_CONSULTA BIGINT NOT NULL
	, ID_PACIENTE BIGINT NOT NULL
	, DATA_CONSULTA DATETIME NOT NULL
);

ALTER TABLE AGENDAMENTO ADD CONSTRAINT PK_AGENDAMENTO PRIMARY KEY(ID_CONSULTA);
ALTER TABLE AGENDAMENTO MODIFY ID_CONSULTA BIGINT NOT NULL AUTO_INCREMENT;
ALTER TABLE AGENDAMENTO ADD CONSTRAINT FK_AGENDAMENTO_PACIENTE FOREIGN KEY(ID_PACIENTE) REFERENCES PACIENTE(ID_PACIENTE);

CREATE TABLE REGISTRO_CONSULTA
(
	ID_CONSULTA BIGINT NOT NULL
	, PRONTUARIO VARCHAR(2000) NOT NULL
	, FINALIZADO BOOL NOT NULL
	, DATA_FIM_CONSULTA DATETIME NULL
);

ALTER TABLE REGISTRO_CONSULTA ADD CONSTRAINT PK_REGISTRO_CONSULTA PRIMARY KEY(ID_CONSULTA);
ALTER TABLE REGISTRO_CONSULTA ADD CONSTRAINT FK_REGISTRO_CONSULTA_AGENDAMENTO FOREIGN KEY(ID_CONSULTA) REFERENCES AGENDAMENTO(ID_CONSULTA);

CREATE TABLE RECEITUARIO
(
	ID_CONSULTA BIGINT NOT NULL
	, ID_MEDICAMENTO BIGINT NOT NULL
	, POSOLOGIA VARCHAR(200) NOT NULL
);

ALTER TABLE RECEITUARIO ADD CONSTRAINT PK_RECEITUARIO PRIMARY KEY (ID_CONSULTA, ID_MEDICAMENTO);
ALTER TABLE RECEITUARIO ADD CONSTRAINT FK_RECEITUARIO_AGENDAMENTO FOREIGN KEY(ID_CONSULTA) REFERENCES AGENDAMENTO(ID_CONSULTA);
ALTER TABLE RECEITUARIO ADD CONSTRAINT FK_RECEITUARIO_MEDICAMENTO FOREIGN KEY(ID_MEDICAMENTO) REFERENCES MEDICAMENTO(ID_MEDICAMENTO);

## INSERTS

INSERT INTO USUARIO (LOGIN, PASSWORD) VALUES ('admin', 'admin');

INSERT INTO PACIENTE(NOME, DATA_NASCIMENTO, SEXO, ENDERECO, TELEFONE, ATIVO) VALUES('MISAEL DA COSTA HOMEM',       '1979-05-06', 'M', 'RUA CELESTE, Nº 91',          '(51) 9888-2034', 1);
INSERT INTO PACIENTE(NOME, DATA_NASCIMENTO, SEXO, ENDERECO, TELEFONE, ATIVO) VALUES('LUIZ HENRIQUE RIES',          '1965-02-01', 'M', 'RUA 7 DE SETEMBRO, Nº 490',   '(51) 3390-9876', 1);
INSERT INTO PACIENTE(NOME, DATA_NASCIMENTO, SEXO, ENDERECO, TELEFONE, ATIVO) VALUES('LUCIA SACCOMORE',             '1961-01-01', 'F', 'RUA 18 DE NOVEMBRO, Nº 1000', '(51) 2232-3232', 1);
INSERT INTO PACIENTE(NOME, DATA_NASCIMENTO, SEXO, ENDERECO, TELEFONE, ATIVO) VALUES('ANGELICA BATTISTI BORTOLINI', '1985-08-21', 'F', 'RUA FERMINIANO MILANO, 220',  '(51) 4444-4444', 1);

INSERT INTO MEDICAMENTO(NOME) VALUES('ASPIRINA');
INSERT INTO MEDICAMENTO(NOME) VALUES('DORFLEX');
INSERT INTO MEDICAMENTO(NOME) VALUES('CATAFLAN');
INSERT INTO MEDICAMENTO(NOME) VALUES('VOLTAREM');
INSERT INTO MEDICAMENTO(NOME) VALUES('TILENOL');

INSERT INTO AGENDAMENTO(ID_PACIENTE, DATA_CONSULTA) VALUES(1, '2014-08-06');
INSERT INTO AGENDAMENTO(ID_PACIENTE, DATA_CONSULTA) VALUES(1, '2014-10-20');
INSERT INTO AGENDAMENTO(ID_PACIENTE, DATA_CONSULTA) VALUES(2, '2014-10-21');
INSERT INTO AGENDAMENTO(ID_PACIENTE, DATA_CONSULTA) VALUES(3, '2014-10-21');

INSERT INTO REGISTRO_CONSULTA(ID_CONSULTA, PRONTUARIO, FINALIZADO) VALUES(1, 'DOR DE BARRIGA', 1);
INSERT INTO REGISTRO_CONSULTA(ID_CONSULTA, PRONTUARIO, FINALIZADO) VALUES(2, 'DORES DE CABEÇA, VÔMITOS E FRAQUEZA', 1);
INSERT INTO REGISTRO_CONSULTA(ID_CONSULTA, PRONTUARIO, FINALIZADO) VALUES(3, 'DORES DE CABEÇA, VÔMITOS E FRAQUEZA', 1);
INSERT INTO REGISTRO_CONSULTA(ID_CONSULTA, PRONTUARIO, FINALIZADO) VALUES(4, 'ENJÔO, DIARRÉIA, FALTA DE APETITE', 1);

